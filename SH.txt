BLK="/dev/mmcblk0p$(fdisk -l | grep 'sn_mac' | awk '{print $1}')"; tmp=$(dd if=$BLK bs=512 count=1 2>/dev/null); SN=$(echo "$tmp" | cut -d';' -f1); MAC=$(echo "$tmp" | cut -d';' -f2); BOARD=$(echo "$tmp" | cut -d';' -f4); PCBA=$(echo "$tmp" | cut -d';' -f5); MSN=$(echo "$tmp" | cut -d';' -f6); VER=$(echo "$tmp" | cut -d';' -f7); NEW_STR="$SN;$MAC;K1C;$BOARD;$PCBA;$MSN;$VER;;"; { echo -n "$NEW_STR"; printf '\000\000'; } | dd of=$BLK bs=512 count=1 2>/dev/null && sync && echo "Done"
